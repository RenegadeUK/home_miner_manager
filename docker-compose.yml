services:
  miner-controller:
    # image: ghcr.io/renegadeuk/home_miner_manager:latest
    build:
      context: .
      args:
        GIT_COMMIT: ${GIT_COMMIT:-unknown}
        GIT_BRANCH: ${GIT_BRANCH:-main}
    container_name: v0-miner-controller
    ports:
      - "${WEB_PORT:-8080}:${WEB_PORT:-8080}"
      - "12345:12345/udp"  # NMMiner telemetry broadcasts
      - "12347:12347/udp"  # NMMiner config
    volumes:
      - ./config:/config
    environment:
      - WEB_PORT=${WEB_PORT:-8080}
      - TZ=${TZ:-UTC}
      - PUID=${PUID:-1000}
      - PGID=${PGID:-1000}
    restart: unless-stopped
